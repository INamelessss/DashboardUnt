<!-- Include necessary CSS and JavaScript links for Bootstrap and Chart.js -->
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <!--Chart js-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" integrity="sha256-Uv9BNBucvCPipKQ2NS9wYpJmi8DTOEfTA/nH2aoJALw=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css" integrity="sha256-aa0xaJgmK/X74WM224KMQeNQC2xYKwlAt08oZqjeF0E=" crossorigin="anonymous" />
</head>
<body>
    <div class="container">
        <table>
            <thead>
              <tr>
                <th>School</th>
                <th>Surname and Names</th>
                <th>Status</th>
                <th>Manager</th>
                <th>Type</th>
                <th>Category</th>
                <th>Grade</th>
                <th>Birth</th>
                <th>Income</th>
              </tr>
            </thead>
            <tbody>
              {% for teacher in teachers %}
                <tr>
                  <td>{{ teacher.school }}</td>
                  <td>{{ teacher.surname_and_names }}</td>
                  <td>{{ teacher.status }}</td>
                  <td>{{ teacher.manager }}</td>
                  <td>{{ teacher.type }}</td>
                  <td>{{ teacher.category }}</td>
                  <td>{{ teacher.grade }}</td>
                  <td>{{ teacher.birth }}</td>
                  <td>{{ teacher.income }}</td>
                </tr>
              {% empty %}
                <tr>
                  <td colspan="9">No teachers found.</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        <!-- First Pizza Graph (Degree Distribution) -->
        <canvas id="degreeChart" width="400" height="400"></canvas>

        <!-- Second Pizza Graph (Contract Distribution) -->
        <canvas id="contractChart" width="400" height="400"></canvas>

        <!-- Bar Graph (Teachers per School) -->
        <canvas id="schoolChart" width="400" height="400"></canvas>

        <!-- Average Age -->
        <p>Average Age: {{ average_age }}</p>
    </div>

    <script>
        // First Pizza Graph (Degree Distribution)
        var degreeCtx = document.getElementById('degreeChart').getContext('2d');
        var degreeChart = new Chart(degreeCtx, {
            type: 'pie',
            data: {
                labels: [
                    'Does not Register',
                    'Masters',
                    'Doctors'
                ],
                datasets: [{
                    data: [
                        {% for degree in degree_distribution %}
                            {{ degree.count }},
                        {% endfor %}
                    ],
                    backgroundColor: ['yellow', 'blue', 'green']
                }]
            }
        });

        // Second Pizza Graph (Contract Distribution)
        var contractCtx = document.getElementById('contractChart').getContext('2d');
        var contractChart = new Chart(contractCtx, {
            type: 'pie',
            data: {
                labels: [
                    'Contracted',
                    'Main'
                ],
                datasets: [{
                    data: [
                        {% for contract in contract_distribution %}
                            {{ contract.count }},
                        {% endfor %}
                    ],
                    backgroundColor: ['red', 'orange']
                }]
            }
        });

        // Bar Graph (Teachers per School)
        var schoolCtx = document.getElementById('schoolChart').getContext('2d');
        var schoolChart = new Chart(schoolCtx, {
            type: 'bar',
            data: {
                labels: [
                    {% for teachers_school in teachers_per_school %}
                        '{{ teachers_school.school }}',
                    {% endfor %}
                ],
                datasets: [{
                    label: 'Teachers per School',
                    data: [
                        {% for teachers_school in teachers_per_school %}
                            {{ teachers_school.count }},
                        {% endfor %}
                    ],
                    backgroundColor: 'blue'
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        precision: 0
                    }
                }
            }
        });
    </script>
</body>
</html>
